{
  "comments": [
    {
      "key": {
        "uuid": "9af37de9_7795bfe2",
        "filename": "templates/scripts/includes/deployment.sh",
        "patchSetId": 10
      },
      "lineNbr": 1045,
      "author": {
        "id": 1000018
      },
      "writtenOn": "2018-10-05T16:44:36Z",
      "side": 1,
      "message": "I tried with: \n- sleep 1 (works)\n- drop caches (works)\n- sync (does not)\n- partprobe (does not)\n\noffer something else, thanks!",
      "range": {
        "startLine": 1045,
        "startChar": 2,
        "endLine": 1045,
        "endChar": 15
      },
      "revId": "c93e11b03262b557277fc68fbfbe751a8b701db3",
      "serverId": "85315e57-5f03-49c3-83f8-201ae2313a75",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9af37de9_979023ee",
        "filename": "templates/scripts/includes/deployment.sh",
        "patchSetId": 10
      },
      "lineNbr": 1045,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2018-10-05T17:11:59Z",
      "side": 1,
      "message": "\u003e I tried with:\n \u003e - sleep 1 (works)\n \u003e - drop caches (works)\n \u003e - sync (does not)\n \u003e - partprobe (does not)\n \u003e \n \u003e offer something else, thanks!\n\nHmm, I was unaware of this problem.\n\nMaybe try with:\n\n  blkid -t PARTLABEL\u003d\"EFI System\" -c /dev/null -g -o device\n\nor with this command before \"blkid\":\n\n  # substitute device if necessary\n  blockdev --flushbufs /dev/sda\n\nor this one if the disk is not in use:\n\n  # again, check device\n  blockdev --flushbufs --rereadpt /dev/sda\n\n\nIf all this fails, maybe keep the drop_caches, but better to document this need either in a comment or the commit message.",
      "parentUuid": "9af37de9_7795bfe2",
      "range": {
        "startLine": 1045,
        "startChar": 2,
        "endLine": 1045,
        "endChar": 15
      },
      "revId": "c93e11b03262b557277fc68fbfbe751a8b701db3",
      "serverId": "85315e57-5f03-49c3-83f8-201ae2313a75",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7ad8896b_eefe9f04",
        "filename": "templates/scripts/includes/deployment.sh",
        "patchSetId": 10
      },
      "lineNbr": 1045,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2018-10-05T21:17:17Z",
      "side": 1,
      "message": "I\u0027d guess the `echo 3 \u003e /proc/sys/vm/drop_caches` just hides the problem since it might take long enough until it finishes.\n\nIf no recommendation from Manuel works either, I\u0027d prefer a \"sleep 1\" over the drop_caches, tbh :) (Then the according work around should include a short comment in the code though!)\n\nAlso my comment from https://gerrit.mgm.sipwise.com/#/c/23965/1/templates/scripts/includes/deployment.sh@1043 applies here (and below with the other blkid invocations) as well AFAICS. If a device has a label \"EFI System\" we\u0027d operate on it, even though it might be a completely unrelated disk?",
      "parentUuid": "9af37de9_979023ee",
      "range": {
        "startLine": 1045,
        "startChar": 2,
        "endLine": 1045,
        "endChar": 15
      },
      "revId": "c93e11b03262b557277fc68fbfbe751a8b701db3",
      "serverId": "85315e57-5f03-49c3-83f8-201ae2313a75",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7ad8896b_0e732b4f",
        "filename": "templates/scripts/includes/deployment.sh",
        "patchSetId": 10
      },
      "lineNbr": 1045,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2018-10-08T08:41:27Z",
      "side": 1,
      "message": "\u003e Also my comment from https://gerrit.mgm.sipwise.com/#/c/23965/1/templates/scripts/includes/deployment.sh@1043\n \u003e applies here (and below with the other blkid invocations) as well\n \u003e AFAICS. If a device has a label \"EFI System\" we\u0027d operate on it,\n \u003e even though it might be a completely unrelated disk?\n\nYeah good one, it\u0027s probably missing the \"${blockdevice}\" as argument of the command blkid, for extra assurance.",
      "parentUuid": "7ad8896b_eefe9f04",
      "range": {
        "startLine": 1045,
        "startChar": 2,
        "endLine": 1045,
        "endChar": 15
      },
      "revId": "c93e11b03262b557277fc68fbfbe751a8b701db3",
      "serverId": "85315e57-5f03-49c3-83f8-201ae2313a75",
      "unresolved": false
    }
  ]
}